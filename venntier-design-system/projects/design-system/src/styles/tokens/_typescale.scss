@use 'sass:map';

// ============================================================================
// TYPOGRAPHY REFERENCE TOKENS - Raw typography values (single source of truth)
// ============================================================================
// Inter-based type scale for OpenAI-inspired design

// Font families
$font-brand:
  'Inter',
  -apple-system,
  blinkmacsystemfont,
  'Segoe UI',
  'Roboto',
  sans-serif;
$font-plain:
  'Inter',
  -apple-system,
  blinkmacsystemfont,
  'Segoe UI',
  'Roboto',
  sans-serif;
$font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;

// Base size and scale
$base-size: 16px;
$scale-ratio: 1.125; // Minor second for tighter scale

// Font weights - OpenAI lighter approach
$weight-thin: 200; // Display text
$weight-light: 300; // Large headings
$weight-regular: 400; // Body text, normal state
$weight-medium: 450; // Labels, buttons (slightly heavier than body)
$weight-semibold: 500; // Emphasis (rarely used)
$weight-bold: 600; // Strong emphasis (very rarely used)

// Line heights - More breathing room
$line-height-tight: 1.3;
$line-height-normal: 1.6;
$line-height-relaxed: 1.7;
$line-height-loose: 1.8;

// Letter spacing
$tracking-tighter: -0.02em;
$tracking-tight: -0.01em;
$tracking-normal: 0;
$tracking-wide: 0.01em;
$tracking-wider: 0.02em;

// ============================================================================
// SEMANTIC TYPOGRAPHY MAPPINGS (for Angular Material theming API)
// ============================================================================
// These map our reference tokens to semantic roles that Angular Material understands

// Typography scale mappings
$typography-scales: (
  // Display styles
  display-large: (
      font: $font-brand,
      size: 3.5rem,
      // 56px
      weight: $weight-light,
      // 300 for OpenAI
      line-height: $line-height-tight,
      tracking: $tracking-tighter,
    ),
  display-medium: (
    font: $font-brand,
    size: 2.75rem,
    // 44px
    weight: $weight-light,
    // 300 for OpenAI
    line-height: $line-height-tight,
    tracking: $tracking-tight,
  ),
  display-small: (
    font: $font-brand,
    size: 2.25rem,
    // 36px
    weight: $weight-regular,
    // 400 for OpenAI
    line-height: $line-height-tight,
    tracking: $tracking-tight,
  ),

  // Headline styles
  headline-large: (
      font: $font-brand,
      size: 2rem,
      // 32px
      weight: $weight-regular,
      // 400 for OpenAI
      line-height: $line-height-normal,
      tracking: $tracking-normal,
    ),
  headline-medium: (
    font: $font-brand,
    size: 1.75rem,
    // 28px
    weight: $weight-regular,
    // 400 for OpenAI
    line-height: $line-height-normal,
    tracking: $tracking-normal,
  ),
  headline-small: (
    font: $font-brand,
    size: 1.5rem,
    // 24px
    weight: $weight-medium,
    // 450 for OpenAI
    line-height: $line-height-normal,
    tracking: $tracking-normal,
  ),

  // Title styles
  title-large: (
      font: $font-brand,
      size: 1.375rem,
      // 22px
      weight: $weight-regular,
      // 400 for OpenAI
      line-height: $line-height-normal,
      tracking: $tracking-normal,
    ),
  title-medium: (
    font: $font-plain,
    size: 1.125rem,
    // 18px
    weight: $weight-medium,
    // 450 for OpenAI
    line-height: $line-height-relaxed,
    tracking: $tracking-wide,
  ),
  title-small: (
    font: $font-plain,
    size: 1rem,
    // 16px
    weight: $weight-medium,
    // 450 for OpenAI
    line-height: $line-height-relaxed,
    tracking: $tracking-wide,
  ),

  // Body styles
  body-large: (
      font: $font-plain,
      size: 1rem,
      // 16px
      weight: $weight-regular,
      line-height: $line-height-relaxed,
      tracking: $tracking-normal,
    ),
  body-medium: (
    font: $font-plain,
    size: 0.875rem,
    // 14px
    weight: $weight-regular,
    line-height: $line-height-relaxed,
    tracking: $tracking-normal,
  ),
  body-small: (
    font: $font-plain,
    size: 0.75rem,
    // 12px
    weight: $weight-regular,
    line-height: $line-height-loose,
    tracking: $tracking-wide,
  ),

  // Label styles
  label-large: (
      font: $font-plain,
      size: 0.875rem,
      // 14px
      weight: $weight-medium,
      // 450 for OpenAI
      line-height: $line-height-normal,
      tracking: $tracking-wide,
    ),
  label-medium: (
    font: $font-plain,
    size: 0.75rem,
    // 12px
    weight: $weight-medium,
    // 450 for OpenAI
    line-height: $line-height-normal,
    tracking: $tracking-wider,
  ),
  label-small: (
    font: $font-plain,
    size: 0.6875rem,
    // 11px
    weight: $weight-medium,
    // 450 for OpenAI
    line-height: $line-height-normal,
    tracking: $tracking-wider,
  ),

  // Code/mono styles (custom addition)
  code: (
      font: $font-mono,
      size: 0.875rem,
      // 14px
      weight: $weight-regular,
      line-height: $line-height-relaxed,
      tracking: $tracking-normal,
    )
);

// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================

// Get a typography reference token value
@function get-typography($scale, $property) {
  @if map.has-key($typography-scales, $scale) {
    $scale-map: map.get($typography-scales, $scale);
    @if map.has-key($scale-map, $property) {
      @return map.get($scale-map, $property);
    } @else {
      @error "Property '#{$property}' not found in typography scale '#{$scale}'.";
    }
  } @else {
    @error "Typography scale '#{$scale}' not found.";
  }
}
