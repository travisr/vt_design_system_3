// Form Field Overrides for OpenAI-style inputs
// Applies flat, minimal styling to Material form fields

@mixin vt-form-field-theme() {
  // Apply to all Material form fields
  .mat-mdc-form-field {
    // Remove subscript wrapper (helper text area)
    .mat-mdc-form-field-subscript-wrapper {
      display: none;
    }
    
    // Remove padding from wrapper
    .mat-mdc-text-field-wrapper {
      padding: 0;
    }
    
    // Align items in the field
    .mat-mdc-form-field-flex {
      align-items: center;
    }
    
    // Style the actual input
    input.mat-mdc-input-element {
      padding: 12px 16px;
      height: 44px;
      box-sizing: border-box;
      background: var(--md-sys-color-surface);
      font-size: var(--md-sys-typescale-body-medium-size);
      
      &::placeholder {
        color: var(--md-sys-color-on-surface-variant);
        opacity: 0.6;
      }
    }
    
    // Remove infix padding
    .mat-mdc-form-field-infix {
      padding: 0;
      border: none;
      min-height: 44px;
    }
    
    // Hide floating label (use static labels above inputs)
    .mat-mdc-floating-label {
      display: none;
    }
    
    // Position label wrapper above input
    .mat-mdc-form-field-label-wrapper {
      top: -24px;
      padding: 0;
      
      .mat-mdc-form-field-label {
        font-size: var(--md-sys-typescale-label-medium-size);
        font-weight: var(--md-sys-typescale-label-medium-weight);
        color: var(--md-sys-color-on-surface);
        position: static;
        transform: none;
      }
    }
    
    // Outline appearance specific
    &.mat-mdc-form-field-appearance-outline {
      .mdc-notched-outline {
        border-color: var(--md-sys-color-outline);
        
        .mdc-notched-outline__leading,
        .mdc-notched-outline__trailing {
          border-width: 1px;
          border-radius: var(--md-sys-shape-corner-small);
        }
        
        .mdc-notched-outline__notch {
          display: none; // No notch for static labels
        }
      }
      
      // Hover state
      &:hover .mdc-notched-outline {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__trailing {
          border-color: var(--md-sys-color-on-surface-variant);
        }
      }
      
      // Focus state
      &.mat-focused .mdc-notched-outline {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__trailing {
          border-width: 2px;
          border-color: var(--md-sys-color-focus-ring);
        }
      }
      
      // Error state
      &.mat-form-field-invalid .mdc-notched-outline {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__trailing {
          border-color: var(--md-sys-color-error);
        }
      }
    }
    
    // Icons in form fields
    .mat-mdc-form-field-icon-prefix,
    .mat-mdc-form-field-icon-suffix {
      color: var(--md-sys-color-on-surface-variant);
      
      mat-icon {
        font-size: 20px;
        width: 20px;
        height: 20px;
      }
    }
    
    // Textarea specific
    textarea.mdc-text-field__input {
      padding: 12px 16px;
      min-height: 100px;
      resize: vertical;
    }
  }
  
  // Select fields
  .mat-mdc-select {
    .mat-mdc-select-trigger {
      height: 44px;
      padding: 0 16px;
      
      .mat-mdc-select-value {
        font-size: var(--md-sys-typescale-body-medium-size);
        color: var(--md-sys-color-on-surface);
      }
      
      .mat-mdc-select-placeholder {
        color: var(--md-sys-color-on-surface-variant);
        opacity: 0.6;
      }
      
      .mat-mdc-select-arrow-wrapper {
        .mat-mdc-select-arrow {
          color: var(--md-sys-color-on-surface-variant);
        }
      }
    }
  }
}