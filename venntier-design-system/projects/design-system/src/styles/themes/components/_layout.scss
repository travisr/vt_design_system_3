// ============================================================================
// LAYOUT COMPONENTS
// ============================================================================
// Cards, lists, tables, dialogs, and layout-related styling

@use '@angular/material' as mat;

@mixin vt-layout-overrides() {
  // ============================================================================
  // CARD OVERRIDES
  // ============================================================================

  @include mat.card-overrides(
    (
      // OpenAI-style outlined cards with subtle borders
      outlined-container-color: var(--mat-sys-surface),
      outlined-outline-color: var(--mat-sys-outline-variant),
      outlined-outline-width: 1px,
      outlined-container-shape: 8px,

      // Flat design - no elevation
      elevated-container-elevation: 0,
      outlined-container-elevation: 0,
      elevated-container-shape: 8px,

      // Default padding using 8px-aligned spacing
      container-padding: 32px,

      // Container styling
      elevated-container-color: var(--mat-sys-surface),
      outlined-container-color: var(--mat-sys-surface),
      elevated-container-shape: 8px,
      outlined-container-shape: 8px,
      outlined-outline-width: 1px,
      outlined-outline-color: var(--mat-sys-outline-variant),
      // Typography tokens for card content
      title-text-font: 'Inter',
      title-text-size: var(--mat-sys-headline-small-size),
      title-text-weight: var(--mat-sys-headline-small-weight),
      title-text-line-height: var(--mat-sys-headline-small-line-height),
      subtitle-text-color: var(--mat-sys-on-surface-variant),
      subtitle-text-font: 'Inter',
      subtitle-text-size: var(--mat-sys-body-medium-size),
      subtitle-text-weight: var(--mat-sys-body-medium-weight)
    )
  );

  // Custom card CSS for properties not available as tokens
  .mat-mdc-card {
    // OpenAI styling - 32px padding using 8px-aligned tokens, flat design
    padding: var(--mat-sys-spacing-32, 32px);
    box-shadow: none; // Ensure completely flat design
    transition: border-color 200ms ease;

    // Default to outlined appearance for subtle borders
    &:not(.mat-mdc-card-outlined) {
      border: 1px solid var(--mat-sys-outline-variant);
      border-radius: 8px;
    }

    // Subtle hover effect - slightly darker border
    &:hover {
      border-color: var(--mat-sys-outline);
    }

    // Override any elevation classes to maintain flat design
    &.mat-elevation-z1,
    &.mat-elevation-z2,
    &.mat-elevation-z3,
    &.mat-elevation-z4,
    &.mat-elevation-z6,
    &.mat-elevation-z8 {
      box-shadow: none;
    }

    // Card sections with proper spacing (8px-aligned)
    .mat-mdc-card-header {
      padding: 0;
      margin-bottom: var(--mat-sys-spacing-24, 24px);

      .mat-mdc-card-header-text {
        margin: 0;
      }

      .mat-mdc-card-title {
        margin-bottom: var(--mat-sys-spacing-8, 8px);
      }

      .mat-mdc-card-subtitle {
        margin: 0;
      }

      .mat-mdc-card-avatar {
        width: var(--mat-sys-spacing-40, 40px);
        height: var(--mat-sys-spacing-40, 40px);
        border-radius: var(--mat-sys-shape-corner-full);
        margin-right: var(--mat-sys-spacing-16, 16px);
      }
    }

    .mat-mdc-card-content {
      padding: 0;
      font-size: var(--mat-sys-body-large-size);
      line-height: var(--mat-sys-body-large-line-height);
      color: var(--mat-sys-on-surface);

      > *:not(:last-child) {
        margin-bottom: 16px;
      }

      p {
        margin: 0 0 16px;

        &:last-child {
          margin-bottom: 0;
        }
      }
    }

    .mat-mdc-card-actions {
      padding: 0;
      margin-top: var(--mat-sys-spacing-24, 24px);
      display: flex;
      gap: var(--mat-sys-spacing-8, 8px);
      align-items: center;

      &.mat-mdc-card-actions-align-end {
        justify-content: flex-end;
      }

      .mat-mdc-button,
      .mat-mdc-raised-button,
      .mat-mdc-outlined-button {
        margin: 0;
      }
    }

    .mat-mdc-card-footer {
      padding: 0;
      margin-top: var(--mat-sys-spacing-24, 24px);
      padding-top: var(--mat-sys-spacing-24, 24px);
      border-top: 1px solid var(--mat-sys-outline-variant);
      font-size: var(--mat-sys-body-small-size);
      color: var(--mat-sys-on-surface-variant);
    }

    // Card image handling (8px-aligned)
    .mat-mdc-card-image {
      margin: calc(-1 * var(--mat-sys-spacing-32, 32px)) calc(-1 * var(--mat-sys-spacing-32, 32px))
        var(--mat-sys-spacing-32, 32px);
      border-radius: var(--mat-sys-shape-corner-medium) var(--mat-sys-shape-corner-medium) 0 0;
      width: calc(100% + 2 * var(--mat-sys-spacing-32, 64px));
      display: block;
    }

    .mat-mdc-card-sm-image {
      width: var(--mat-sys-spacing-80, 80px);
      height: var(--mat-sys-spacing-80, 80px);
      border-radius: var(--mat-sys-shape-corner-small);
    }

    .mat-mdc-card-lg-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: var(--mat-sys-shape-corner-small);
      margin-bottom: var(--mat-sys-spacing-16, 16px);
    }
  }

  // Card variants and utility classes (8px-aligned)
  .mat-mdc-card.vt-card--compact {
    padding: var(--mat-sys-spacing-24, 24px);
  }

  .mat-mdc-card.vt-card--comfortable {
    padding: var(--mat-sys-spacing-40, 40px);
  }

  .mat-mdc-card.vt-card--borderless {
    border: none;
    background-color: transparent;
    padding: 0;
  }

  .mat-mdc-card.vt-card--interactive {
    cursor: pointer;

    &:hover {
      background-color: var(--mat-sys-surface-variant);
      border-color: var(--mat-sys-outline);
    }

    &:active {
      background-color: var(--mat-sys-primary);
    }
  }

  .mat-mdc-card.vt-card--selected {
    background-color: var(--mat-sys-primary);
    border-color: var(--mat-sys-primary);
  }

  // ============================================================================
  // LIST OVERRIDES
  // ============================================================================

  @include mat.list-overrides(
    (
      // Container styling
      list-item-container-color: transparent,
      list-item-container-shape: var(--mat-sys-shape-corner-small),
      // More compact heights to match sidenav style (sidenav uses 32px)
      list-item-one-line-container-height: 32px,
      // Matches sidenav height exactly
      list-item-two-line-container-height: 48px,
      // Compact for two-line content
      list-item-three-line-container-height: 64px,
      // Compact for three-line content
      // More compact icon spacing to match sidenav style
      list-item-leading-icon-start-space: 4px,
      // Reduced from 16px to match sidenav
      list-item-leading-icon-end-space: 4px,
      // Reduced from 16px to match sidenav
      // Label text styling
      list-item-label-text-color: var(--mat-sys-on-surface-variant),
      list-item-label-text-font: 'Inter',
      list-item-label-text-size: 14px,
      list-item-label-text-weight: 400,

      // Icon styling
      list-item-leading-icon-color: var(--mat-sys-on-surface-variant),
      list-item-trailing-icon-color: var(--mat-sys-on-surface-variant),
      list-item-leading-icon-size: 16px,
      list-item-trailing-icon-size: 16px,

      // Hover state
      list-item-hover-state-layer-color: var(--mat-sys-surface-variant),
      list-item-hover-label-text-color: var(--mat-sys-on-surface-variant),
      list-item-hover-leading-icon-color: var(--mat-sys-on-surface-variant),
      // Selected/Active state
      list-item-selected-container-color: var(--mat-sys-primary),
      list-item-selected-trailing-icon-color: var(--mat-sys-primary),
      // Focus state
      list-item-focus-state-layer-color: transparent,

      // Disabled state
      list-item-disabled-label-text-color: color-mix(
          in srgb,
          var(--mat-sys-on-surface) 38%,
          transparent
        ),
      list-item-disabled-leading-icon-color: color-mix(
          in srgb,
          var(--mat-sys-on-surface) 38%,
          transparent
        )
    )
  );

  // ============================================================================
  // TABLE STYLING
  // ============================================================================

  // TABLE - Clean data presentation
  table.mat-mdc-table {
    border: 1px solid var(--mat-sys-outline-variant);
    border-radius: 8px;
    overflow: hidden;
    background-color: var(--mat-sys-surface);

    .mat-mdc-header-row {
      background-color: var(--mat-sys-surface-variant);
      height: 48px;
      border-bottom: 1px solid var(--mat-sys-outline-variant);
    }

    .mat-mdc-row {
      height: 52px;
      border-bottom: 1px solid var(--mat-sys-outline-variant);

      &:hover {
        background-color: var(--mat-sys-surface-variant);
      }

      &:last-child {
        border-bottom: none;
      }
    }

    .mat-mdc-cell,
    .mat-mdc-header-cell {
      font-size: 14px;
      padding: 0 16px;
    }

    .mat-mdc-header-cell {
      font-weight: 500;
      color: var(--mat-sys-on-surface-variant);
    }

    .mat-mdc-cell {
      color: var(--mat-sys-on-surface);
    }
  }

  // ============================================================================
  // DIALOG STYLING
  // ============================================================================

  // DIALOG - Clean modal style
  .mat-mdc-dialog-container {
    --mdc-dialog-container-color: var(--mat-sys-surface);
    --mdc-dialog-container-shape: 12px;

    border: 1px solid var(--mat-sys-outline-variant);
    border-radius: 12px;
    padding: 32px;
    background-color: var(--mat-sys-surface);
  }

  // ============================================================================
  // LAYOUT HELPERS
  // ============================================================================

  // Layout helpers
  .vt-card-section {
    margin-bottom: 32px;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .vt-card-grid {
    display: grid;
    gap: 24px;

    &.vt-card-grid--2 {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    &.vt-card-grid--3 {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }

    &.vt-card-grid--4 {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
  }

  .vt-card-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
}
