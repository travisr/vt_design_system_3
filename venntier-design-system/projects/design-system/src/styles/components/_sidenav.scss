// Venntier Design System - Sidenav Theme
// OpenAI-inspired sidenav styling for Angular Material

@use '@angular/material' as mat;

@mixin vt-sidenav-theme() {
  // Base sidenav container styles
  mat-sidenav,
  .mat-drawer.mat-sidenav,
  .mat-sidenav {
    background: var(--md-sys-color-surface-container-low);
    border-right: 1px solid var(--md-sys-color-outline-variant);
    border-radius: 0;  // Remove rounded corners
    
    // Standard width for navigation drawer
    &.vt-sidenav-standard {
      width: 240px;
    }
    
    &.vt-sidenav-expanded {
      width: 280px;
    }
    
    &.vt-sidenav-collapsed {
      width: 64px;
    }
  }
  
  // Sidenav header area (logo/brand) - match toolbar height
  .vt-sidenav-header {
    height: 64px; // Match toolbar height
    padding: 0 16px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--md-sys-color-outline-variant);
    
    .vt-sidenav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 16px;
      font-weight: 600;
      color: var(--md-sys-color-on-surface);
      
      mat-icon {
        color: var(--md-sys-color-tertiary);
        font-size: 20px;
        width: 20px;
        height: 20px;
      }
    }
  }
  
  // Sidenav content area
  .vt-sidenav-content {
    padding: 4px 0;
    overflow-y: auto;
    overflow-x: hidden;
    height: calc(100vh - 64px); // Account for header (64px height)
    
    // Hide scrollbar but keep functionality
    &::-webkit-scrollbar {
      width: 0;
      background: transparent;
    }
    
    // Firefox
    scrollbar-width: none;
  }
  
  // Navigation sections
  .vt-nav-section {
    padding: 8px 8px 4px 8px;
    
    .vt-nav-section-title {
      padding: 12px 8px 4px 8px;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.05em;
      color: var(--md-sys-color-on-surface-variant);
      text-transform: none;
    }
  }
  
  // Override Material's list styles using custom class wrapper
  .vt-nav-section .mat-mdc-nav-list,
  mat-sidenav .mat-mdc-nav-list {
    padding: 0;
    
    // Use custom class for better specificity without !important
    .vt-nav-item,
    a[mat-list-item] {
      height: 32px;
      margin: 2px 0;
      padding: 0 8px;
      border-radius: 6px;
      transition: background-color 0.15s ease;
      position: relative;
      background-color: transparent;
      
      // Disable Material's state layer using opacity
      &::before {
        opacity: 0;
      }
      
      // Default state text
      .mat-mdc-list-item-unscoped-content {
        color: var(--md-sys-color-on-surface-variant);
        padding: 0;
        display: flex;
        align-items: center;
        height: 100%;
      }
      
      // Icon styling
      .mat-icon,
      mat-icon {
        margin-right: 10px;
        font-size: 16px;
        width: 16px;
        height: 16px;
        color: var(--md-sys-color-on-surface-variant);
        transition: color 0.15s ease;
      }
      
      // Text styling
      .mat-mdc-list-item-title,
      span[matListItemTitle] {
        font-size: 14px;
        line-height: 32px;
        font-weight: 400;
        color: inherit;
      }
      
      // Hover state - use pseudo-class chain for specificity
      &:hover:not(.active):not([disabled]) {
        background-color: var(--md-sys-color-hover);  // #f7f7f8 - middle shade
        
        .mat-mdc-list-item-unscoped-content {
          color: var(--md-sys-color-on-surface-variant);
        }
      }
      
      // Active/selected state
      &.active,
      &[aria-selected="true"] {
        background-color: var(--md-sys-color-selected);  // #ececf1 - darkest shade
        
        .mat-mdc-list-item-unscoped-content {
          color: var(--md-sys-color-primary);  // Use primary (black) for maximum contrast
          font-weight: 500;  // Medium weight - not too heavy
        }
        
        .mat-icon,
        mat-icon {
          color: var(--md-sys-color-primary);
        }
        
        .mat-mdc-list-item-title,
        span[matListItemTitle] {
          color: var(--md-sys-color-primary);
          font-weight: 500;  // Medium weight - not too heavy
        }
      }
      
      // Disable Material's ripple using CSS variables (wrapped in & {} for Sass 3.0)
      & {
        --mat-ripple-color: transparent;
        --mdc-ripple-color: transparent;
        --mdc-ripple-hover-opacity: 0;
        --mdc-ripple-focus-opacity: 0;
        --mdc-ripple-pressed-opacity: 0;
      }
      
      // Disabled state
      &[disabled] {
        opacity: 0.38;
        cursor: not-allowed;
      }
      
      // Focus state
      &:focus-visible {
        outline: 2px solid var(--md-sys-color-focus-ring);
        outline-offset: -2px;
      }
    }
  }
  
  // Nested navigation items (submenu)
  .vt-nav-nested {
    .mat-mdc-nav-list {
      padding-left: 16px;
      
      .mat-mdc-list-item {
        height: 28px;
        font-size: 13px;
        
        mat-icon {
          font-size: 14px;
          width: 14px;
          height: 14px;
        }
      }
    }
  }
  
  // Sidenav footer area
  .vt-sidenav-footer {
    padding: 16px;
    border-top: 1px solid var(--md-sys-color-outline-variant);
    margin-top: auto;
  }
  
  // Dark theme adjustments
  [data-theme="dark"] & {
    .mat-sidenav {
      background: var(--md-sys-color-surface);  // Dark theme sidenav
      border-right-color: var(--md-sys-color-outline-variant);
    }
  }
  
  // Responsive behavior
  @media (max-width: 960px) {
    .mat-sidenav {
      &.vt-sidenav-standard {
        width: 100%;
        max-width: 280px;
      }
    }
  }
}