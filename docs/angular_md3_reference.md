Here’s the output generated by applying your new precision prompt template exactly as written:

⸻

# Angular 19+ & MD3 — DOs / DON’Ts (LLM Agent Reference)

## Angular 19+ (Framework)

**DO**

- Use new template control flow: `@if`, `@for`, `@switch` instead of `*ngIf/*ngFor/*ngSwitch`.
- Prefer **Signals** for local state; use `linkedSignal` for derived-with-previous, `resource()` for async.
- Use `@defer` for non-critical views; pair with SSR incremental hydration when using SSR.
- Keep components **standalone**; import dependencies at component level (no NgModule declarations).
- Use the **Application Builder** (esbuild/Vite) for builds/dev.
- Provide HttpClient with Fetch for SSR & advanced options:

  ```ts
  provideHttpClient(withFetch());

  •	Consider zoneless change detection with Signals-heavy code; make state changes explicit.
  •	Keep effect() callbacks pure/minimal; be aware they run during change detection.
  •	Use route-level render modes to choose SSR / prerender / client per route.
  ```

DON’T
• Don’t declare standalone components in NgModules.
• Don’t write new code with legacy *ngIf/*ngFor/\*ngSwitch unless migrating.
• Don’t rely on XHR-only HttpClient defaults with SSR features.
• Don’t hide side effects in effect(); avoid change-detection loops.

⸻

Styling & Angular Material (MD3)

DO
• Use the MD3 theming API with tokens and CSS variables:

@use '@angular/material' as mat;
$theme: mat.define-theme((
  color: (theme-type: light, primary: mat.$azure-palette, tertiary: mat.$blue-palette),
  density: (scale: 0),
));
:root { @include mat.all-component-themes($theme); }

    •	Apply system-wide tweaks with mat.theme-overrides (color roles, typography, elevation, radius).
    •	Prefer token-driven styling over ad-hoc selectors (roles: primary, secondary, tertiary, error).
    •	Scope overrides to components with low-specificity selectors (:host, simple class selectors).
    •	Use CSS variables from tokens for local adjustments:

:host {
--mat-sys-primary: #006A6A;
}

    •	Support light/dark themes via tokens and prefers-color-scheme.

DON’T
• Don’t use !important unless absolutely unavoidable and documented.
• Don’t override Material internals without checking for exposed tokens/mixins first.
• Don’t use M2-only APIs (mat-palette, accent/warn, color="primary" in M3).
• Don’t depend on unstable deep selectors for Material components.
• Don’t use ::ng-deep except as last resort (document usage if needed).
• Don’t dump broad, unscoped overrides into global styles—they bleed and complicate upgrades.

⸻

Performance

DO
• Combine @defer + SSR incremental hydration for faster Time to Interactive (TTI).
• Split routes by render mode; defer non-critical feature modules/components.

DON’T
• Don’t assume only standalone code can be deferred—NgModule dependencies can be deferred too.

---
